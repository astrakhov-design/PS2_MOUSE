//mouse testing circut top module
//date: 01.10.2020
module mouse_top(
	input clk, rst,
	inout ps2d, ps2c,
	
	output middle_led,
	output left_led,
	output right_led,
	output done_tick_led,
	
	output [6:0] sseg,
	output [3:0] anode );
	
	//axis with overflow
	wire [8:0] x_input, y_input;
	wire [2:0] btnm;
	//w/o overflow
	reg [7:0] x_axis, y_axis;
	
	mouse mouse_uut(
		.clk(clk), .rst(rst),
		.ps2d(ps2d), .ps2c(ps2c),
		.xm(x_input), .ym(y_input),
		.btnm(btnm), .m_done_tick(done_tick_led) );
		
	always @ (posedge clk, posedge rst) begin
		if (rst)
			begin
				x_axis <= 0;
				y_axis <= 0;
			end
		else
			case({x_input[8],y_input[8]})
				2'b00:
					begin
						x_axis <= x_input[7:0];
						y_axis <= y_input[7:0];
					end
				2'b01:
					begin
						x_axis <= x_input[7:0];
						y_axis <= y_input[8:1];
					end
				2'b10:
					begin
						x_axis <= x_input[8:1];
						y_axis <= y_axis[7:0];
					end
				default:
					begin
						x_axis <= x_input[8:1];
						y_axis <= y_axis[8:1];
					end
			endcase
	end
	
	led_controller led_uut(
		.clk(clk), .rst(rst),
		.x_axis(x_axis), .y_axis(y_axis),
		.sseg(sseg), .anode(anode) );
	
	assign middle_led = btnm[2];
	assign right_led = btnm[1];
	assign left_led = btnm[0];
	
endmodule
			
	